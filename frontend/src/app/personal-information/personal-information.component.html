<div class="personal-info-container">
  <h1>Personal Information</h1>
  
  <div class="success-message" *ngIf="submitSuccess">
    <p>Your personal information has been saved successfully! Redirecting to home page...</p>
  </div>
  
  <div class="error-message-container" *ngIf="submitError">
    <p>{{ submitError }}</p>
  </div>
  
  <form [formGroup]="personalInfoForm" (ngSubmit)="onSubmit()" *ngIf="!submitSuccess">
    <div class="form-group">
      <label for="fullName">Full Name:</label>
      <input type="text" id="fullName" formControlName="fullName" required />
      <div class="validation-error" *ngIf="personalInfoForm.get('fullName')?.invalid && personalInfoForm.get('fullName')?.touched">
        Please enter your full name
      </div>
    </div>
    <div class="form-group">
      <label for="dob">Date of Birth:</label>
      <input type="date" id="dob" formControlName="dob" required />
      <div class="validation-error" *ngIf="personalInfoForm.get('dob')?.invalid && personalInfoForm.get('dob')?.touched">
        Please enter your date of birth
      </div>
    </div>
    <div class="form-group">
      <label for="gender">Gender:</label>
      <select id="gender" formControlName="gender" required>
        <option value="">Select Gender</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
        <option value="other">Other</option>
      </select>
      <div class="validation-error" *ngIf="personalInfoForm.get('gender')?.invalid && personalInfoForm.get('gender')?.touched">
        Please select your gender
      </div>
    </div>
    <div class="form-group">
      <label for="genderIdentity">Gender Identity (optional):</label>
      <input type="text" id="genderIdentity" formControlName="genderIdentity" />
    </div>
    <div class="form-group">
      <label for="address">Home Address:</label>
      <input type="text" id="address" formControlName="address" required />
      <div class="validation-error" *ngIf="personalInfoForm.get('address')?.invalid && personalInfoForm.get('address')?.touched">
        Please enter your home address
      </div>
    </div>
    <div class="form-group">
      <label for="primaryPhone">Primary Phone Number:</label>
      <input
        type="tel"
        id="primaryPhone"
        formControlName="primaryPhone"
        required
      />
      <div class="validation-error" *ngIf="personalInfoForm.get('primaryPhone')?.invalid && personalInfoForm.get('primaryPhone')?.touched">
        Please enter a valid phone number
      </div>
    </div>
    <div class="form-group">
      <label for="alternatePhone">Alternate Phone Number:</label>
      <input type="tel" id="alternatePhone" formControlName="alternatePhone" />
      <div class="validation-error" *ngIf="personalInfoForm.get('alternatePhone')?.invalid && personalInfoForm.get('alternatePhone')?.touched">
        Please enter a valid phone number
      </div>
    </div>
    <div class="form-group email-display">
      <label>Email Address:</label>
      <div class="readonly-field">
        <span>{{ userEmail }}</span>
        <small class="note">Email cannot be changed in this form. Please contact support for email changes.</small>
      </div>
    </div>
    <button type="submit" [disabled]="!personalInfoForm.valid || isSubmitting">
      <span *ngIf="isSubmitting">Saving...</span>
      <span *ngIf="!isSubmitting">{{ isEditing ? 'Update Information' : 'Submit' }}</span>
    </button>
    <button type="button" class="back-button" (click)="goBack()">Back</button>
  </form>
</div>
